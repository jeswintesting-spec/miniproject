<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Events & Notifications - ChillSpot CUCEK</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen text-gray-800">

<header class="bg-white shadow-md sticky top-0 z-50">
  <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
    <a href="../backkk.html" class="text-2xl font-bold text-teal-600 transition-colors hover:text-teal-700">
      ChillSpot CUCEK
    </a>
  </nav>
</header>

<main class="container mx-auto px-6 py-8">
  <div class="flex flex-col lg:flex-row gap-6">

    <!-- Events Section -->
    <section class="flex-1">
      <h2 class="text-xl font-semibold mb-4 text-teal-700">Upcoming Events</h2>
      <div id="eventsList" class="space-y-4"></div>
      <p id="noEvents" class="hidden text-gray-500 italic">No events added yet.</p>
    </section>

    <!-- Notifications Section -->
    <aside class="w-full lg:w-96">
      <div class="bg-white rounded-xl shadow p-4 sticky top-20">
        <h3 class="font-semibold text-lg mb-3 text-teal-700">Notifications</h3>
        <ul id="notifList" class="divide-y"></ul>
        <p id="noNotif" class="hidden text-gray-500 italic mt-3">No notifications yet.</p>
      </div>
    </aside>

  </div>
</main>

<script>
const eventsList = document.getElementById('eventsList');
const notifList = document.getElementById('notifList');
const noEvents = document.getElementById('noEvents');
const noNotif = document.getElementById('noNotif');

async function fetchEvents() {
    const res = await fetch('api.php?action=getEvents');
    const events = await res.json();
    eventsList.innerHTML = '';
    if(events.length === 0){ noEvents.classList.remove('hidden'); return; }
    noEvents.classList.add('hidden');
    events.forEach(ev => {
        const card = document.createElement('article');
        card.className = 'bg-white rounded-lg p-4 shadow';
        card.innerHTML = `
            <h3 class="text-lg font-semibold text-teal-700">${ev.title}</h3>
            <p class="text-gray-600 text-sm">${ev.date} ${ev.time || ''}</p>
            <p class="text-gray-700 mt-2">${ev.description || ''}</p>
        `;
        eventsList.appendChild(card);
    });
}

async function fetchNotifs() {
    const res = await fetch('api.php?action=getNotifs');
    const notifs = await res.json();
    notifList.innerHTML = '';
    if(notifs.length === 0){ noNotif.classList.remove('hidden'); return; }
    noNotif.classList.add('hidden');
    notifs.forEach(n => {
        const li = document.createElement('li');
        li.className = 'py-3 text-sm text-gray-800';
        li.textContent = n.text;
        notifList.appendChild(li);
    });
}


fetchEvents();
fetchNotifs();
</script>

</body>
</html>
